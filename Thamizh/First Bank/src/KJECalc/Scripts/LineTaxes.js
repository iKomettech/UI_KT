
KJE.LineTaxesCalc=function(){this.ENDING_BALANCE=0;this.LOAN_TYPE_LABEL="";this.LOAN_TYPE_MSG="";this.DS_BALANCE=null;this.cats=null;this.sSchedule=new KJE.Repeating()};KJE.LineTaxesCalc.prototype.clear=function(){this.MONTHLY_PAYMENT=0;this.INTEREST_RATE=0;this.TERM=0;this.LOAN_AMOUNT=0;this.PAYMENT_OPTION=KJE.Default.TRADITIONAL;this.PAYMENT_CALC=true;this.PERCENT_PAYMENT=0;this.TAX_RATE=0;this.STATE_TAX_RATE=0;this.FEDERAL_TAX_RATE=0};KJE.LineTaxesCalc.prototype.calculate=function(G){var m=KJE;var h=this.PAYMENT_CALC;var z=this.LOAN_AMOUNT;var r=this.MONTHLY_PAYMENT;var g=this.INTEREST_RATE;var H=this.TERM;var b=this.STATE_TAX_RATE;var E=this.FEDERAL_TAX_RATE;var A=this.PAYMENT_OPTION;var C=this.PERCENT_PAYMENT=KJE.Default.PAYMENT_OPTION_PERCENT[A];var e=0;var d=0;var v=0;var p=0;var D=this.TAX_RATE;if(D==0){D=((b/100)*(1-E/100))*100+E}var t=(g/100)*(1-D/100);if(g<0){throw ("Interest rate must be greater than or equal to zero.")}var j=KJE.Default.LOAN_TYPE[A];if(j==KJE.Default.PERCENT_BALANCE){this.LOAN_TYPE_LABEL="line";this.LOAN_TYPE_MSG="This payment is for a line with an APR of INTEREST_RATE.";if(!h){z=Math.round(r/(C))}else{r=m.round(z*C,2)}}else{if(j==KJE.Default.PERCENT_INTEREST){this.LOAN_TYPE_LABEL="line";this.LOAN_TYPE_MSG="This payment is for a line with an APR of INTEREST_RATE.";if(!h){z=Math.round(r/((C)*(g/1200)))}else{r=m.round(m.round((g/1200)*z,2)*(C),2)}}else{this.LOAN_TYPE_LABEL="loan";this.LOAN_TYPE_MSG="This payment is for a total of TERM months at INTEREST_RATE APR.";if(!h){z=Math.round(KJE.PV(g/1200,H,r))}else{r=m.round(KJE.PMT(g/1200,H,z),2)}}}var u=Math.round(H);var B=0;var s=u;if(u>120){s=u/12;if((u%12)!=0){s+=1}}else{if(u>60){s=u/4;if((u%4)!=0){s+=1}}else{if(u>30){s=u/2;if((u%2)!=0){s+=1}}}}this.DS_BALANCE=KJE.FloatArray(s);this.cats=KJE.FloatArray(s);if(G){var o=this.sSchedule;o.clearRepeat();o.addHeader(o.sReportCol("#",1),o.sReportCol("Payment",2),o.sReportCol("Principal",3),o.sReportCol("Interest",4),o.sReportCol("Loan balance",5));o.addRepeat("&nbsp;","&nbsp;","&nbsp;","&nbsp;",m.dollars(z))}var a=z;var F=0;var I=0;var l=r;var c=0;var f=0;this.ENDING_BALANCE=0;var k=0;if(D>0){k=D/100}var w=0;var x=true;for(var y=1;y<=u;y++){B=y-1;if(u>120){x=((B%12)==0)}else{if(u>60){x=((B%4)==0)}else{if(u>30){x=((B%2)==0)}else{x=true}}}F=m.round((g/1200)*a,2);if(A==KJE.Default.PERCENT_BALANCE){l=m.round(a*(C/100),2);I=l-F;a-=I;if(a<0){I+=a;a=0}}else{if(A==KJE.Default.PERCENT_INTEREST){I=0;l=m.round(F*(C/100),2);a=a+F-l}else{I=r-F;a-=I;if(a<0){l+=a;a=0;I=l-F}else{l=r}if(u==y){if(a>0.005){l+=a;a=0;I=l-F}else{a=0}}}}c+=l;f+=F;e+=m.round(F*(k),2);if(y==1){d=m.round(f*(k),2);p=l-d}if(y<=12){v+=m.round(F*(k),2)}if(x){if(u>120){this.cats[w]=""+((y+12)/12)}else{this.cats[w]=""+y}this.DS_BALANCE[w]=(a);w+=1}if(G){o.addRepeat(m.number(y),m.dollars(l,2),m.dollars(I,2),m.dollars(F,2),m.dollars(a,2))}}this.ENDING_BALANCE=a;this.INTEREST_PAID=f;this.TOTAL_OF_PAYMENTS=c;this.TAX_REDUCTION_TOTAL=e;this.TAX_REDUCTION_PER_PERIOD=d;this.TAX_REDUCTION_FIRST_YEAR=v;this.AFTER_TAX_NET_PAYMENT=p;this.TAX_ADJ_RATE=t;this.LOAN_AMOUNT=z;this.MONTHLY_PAYMENT=r};KJE.LineTaxesCalc.prototype.formatReport=function(a){a.replace("LOAN_TYPE_MSG",this.LOAN_TYPE_MSG);a.replace("LOAN_TYPE_LABEL",this.LOAN_TYPE_LABEL);a.dollars("MONTHLY_PAYMENT",this.MONTHLY_PAYMENT);a.loanRate("INTEREST_RATE",this.INTEREST_RATE/100);a.number("TERM",this.TERM);a.dollars("LOAN_AMOUNT",this.LOAN_AMOUNT);a.taxRate("FEDERAL_TAX_RATE",this.FEDERAL_TAX_RATE/100);a.taxRate("STATE_TAX_RATE",this.STATE_TAX_RATE/100);a.taxRate("TAX_RATE",this.TAX_RATE/100);a.dollars("TAX_REDUCTION_TOTAL",this.TAX_REDUCTION_TOTAL);a.dollars("TAX_REDUCTION_PER_PERIOD",this.TAX_REDUCTION_PER_PERIOD);a.dollars("TAX_REDUCTION_FIRST_YEAR",this.TAX_REDUCTION_FIRST_YEAR);a.dollars("AFTER_TAX_NET_PAYMENT",this.AFTER_TAX_NET_PAYMENT);a.dollars("TOTAL_OF_PAYMENTS",this.TOTAL_OF_PAYMENTS);a.dollars("INTEREST_PAID",this.INTEREST_PAID);a.replace("PAYMENT_OPTION",KJE.Default.PAYMENT_OPTION_LABELS[this.PAYMENT_OPTION]);a.number("PERCENT_PAYMENT",this.PERCENT_PAYMENT,1);a.dollars("ENDING_BALANCE",this.ENDING_BALANCE);a.taxRate("TAX_ADJ_RATE",this.TAX_ADJ_RATE);a.replace("**REPEATING GROUP**",this.sSchedule.getRepeat())};KJE.Default.TRADITIONAL=0;KJE.Default.PERCENT_INTEREST=1;KJE.Default.PERCENT_BALANCE=2;KJE.Default.PAYMENT_OPTION_LABELS=["a fixed term loan","100% of interest owed","1% of balance","1.5% of balance","2% of balance"];KJE.Default.LOAN_TYPE=[KJE.Default.TRADITIONAL,KJE.Default.PERCENT_INTEREST,KJE.Default.PERCENT_BALANCE,KJE.Default.PERCENT_BALANCE,KJE.Default.PERCENT_BALANCE];KJE.Default.PAYMENT_OPTION_PERCENT=[0,1,0.01,0.015,0.02];KJE.Default.PAYMENT_OPTION_INDEX=[0,1,2,3,4];KJE.CalcName="Loan & Credit Line Tax Savings";KJE.CalcType="LineTaxes";KJE.CalculatorTitleTemplate="Your first year tax savings is KJE1.";KJE.parseInputs=function(b){var a=KJE.getDropBox("PAYMENT_OPTION",KJE.parameters.get("PAYMENT_OPTION",KJE.Default.TRADITIONAL),KJE.Default.PAYMENT_OPTION_INDEX,KJE.Default.PAYMENT_OPTION_LABELS);b=KJE.replace("**PAYMENT_OPTION**",a,b);return b};KJE.initialize=function(){KJE.CalcControl=new KJE.LineTaxesCalc();KJE.GuiControl=new KJE.LineTaxes(KJE.CalcControl)};KJE.LineTaxes=function(j){var d=KJE;var b=KJE.gLegend;var g=KJE.inputs.items;KJE.Radioboxes("PAYMENT_CALC","Calculate",true,"Payment","Loan Amount","bold");KJE.DollarSlider("MONTHLY_PAYMENT","Monthly payment",0,100000,0,0,6);KJE.MortgageRateSlider("INTEREST_RATE","Interest rate");KJE.NumberSlider("TERM","Term in months",1,360,0);KJE.MortgageAmtSlider("LOAN_AMOUNT","Loan amount");KJE.PercentSlider("STATE_TAX_RATE","State tax rate",0,50,1);KJE.PercentSlider("FEDERAL_TAX_RATE","Federal tax rate",0,50,1);KJE.DropBox("PAYMENT_OPTION","Payment option");KJE.Label("INTEREST_PAID","Total interest paid");KJE.Label("TOTAL_OF_PAYMENTS","Total payments");KJE.Label("ENDING_BALANCE","Ending balance");KJE.InputItem.AltHelpName="TAX_SAVINGS";KJE.Label("TAX_REDUCTION_FIRST_YEAR","First year tax savings",null,null,"bold");KJE.Label("TAX_REDUCTION_TOTAL","Total tax savings",null,null,"bold");var h=KJE.gNewGraph(KJE.gCOLUMN,"GRAPH1",true,false,KJE.colorList[1],"Principal Balances for a KJE1 loan");h._legend.setVisible(false);h._titleXAxis.setText("Payment Number");h._titleYAxis.setText("Principal Balance");var a=KJE.parameters.get("MSG_DROPPER_TITLE","Loan & credit line inputs:");var c=KJE.parameters.get("MSG_DROPPER_CLOSETITLE","Total savings KJE1");var e=function(){return a};KJE.addDropper(new KJE.Dropper("INPUTS",true,e,e),KJE.colorList[0]);var k=KJE.parameters.get("MSG_DROPPER2_TITLE","Calculation results:");var f=KJE.parameters.get("MSG_DROPPER2_CLOSETITLE","First Year Savings: KJE1, Total tax savings: KJE2");var i=function(){return k+KJE.subText(KJE.getKJEReplaced(f,d.dollars(j.TAX_REDUCTION_FIRST_YEAR,2),d.dollars(j.TAX_REDUCTION_TOTAL,2)),"KJECenter")};KJE.addDropper(new KJE.Dropper("INPUTS2",false,k,i),KJE.colorList[0])};KJE.LineTaxes.prototype.setValues=function(b){var a=KJE.inputs.items;b.PAYMENT_CALC=a.PAYMENT_CALC.getValue();if(b.PAYMENT_CALC){a.LOAN_AMOUNT.enable();a.MONTHLY_PAYMENT.disable();b.LOAN_AMOUNT=a.LOAN_AMOUNT.getValue()}else{a.MONTHLY_PAYMENT.enable();a.LOAN_AMOUNT.disable();b.MONTHLY_PAYMENT=a.MONTHLY_PAYMENT.getValue()}b.INTEREST_RATE=a.INTEREST_RATE.getValue();b.TERM=a.TERM.getValue();b.FEDERAL_TAX_RATE=a.FEDERAL_TAX_RATE.getValue();b.STATE_TAX_RATE=a.STATE_TAX_RATE.getValue();b.PAYMENT_OPTION=a.PAYMENT_OPTION.getValue()};KJE.LineTaxes.prototype.refresh=function(e){var d=KJE;var c=KJE.gLegend;var b=KJE.inputs.items;var a=KJE.gGraphs[0];KJE.setTitleTemplate(d.dollars(e.TAX_REDUCTION_FIRST_YEAR));a.removeAll();a.setGraphCategories(e.cats);if(e.TERM>120){a.add(new KJE.gGraphDataSeries(e.DS_BALANCE,"Balance by year",a.getColor(1)));a._titleXAxis.setText("Payment Number")}else{a.add(new KJE.gGraphDataSeries(e.DS_BALANCE,"Balance by payment",a.getColor(1)));a._titleXAxis.setText("Year Number")}a.setTitleTemplate(d.dollars(e.LOAN_AMOUNT));a.paint();b.LOAN_AMOUNT.setValue(e.LOAN_AMOUNT,true);b.MONTHLY_PAYMENT.setValue(e.MONTHLY_PAYMENT,true);b.TAX_REDUCTION_TOTAL.setText(d.dollars(e.TAX_REDUCTION_TOTAL,2));b.TOTAL_OF_PAYMENTS.setText(d.dollars(e.TOTAL_OF_PAYMENTS,2));b.INTEREST_PAID.setText(d.dollars(e.INTEREST_PAID,2));b.ENDING_BALANCE.setText(d.dollars(e.ENDING_BALANCE,2));b.TAX_REDUCTION_FIRST_YEAR.setText(d.dollars(e.TAX_REDUCTION_FIRST_YEAR,2))};KJE.InputScreenText=" <div id=KJE-D-INPUTS><div id=KJE-P-INPUTS>Input information:</div></div> <div id=KJE-E-INPUTS > <div id=\"KJE-C-PAYMENT_CALC\"><fieldset id='KJE-FS-PAYMENT_CALC'><input id=\"KJE-PAYMENT_CALC1\" type=radio name=PAYMENT_CALC /><input id=\"KJE-PAYMENT_CALC2\" type=radio name=PAYMENT_CALC /></fieldset></div> <div id='KJE-C-PAYMENT_OPTION'>**PAYMENT_OPTION**</div> <div id='KJE-C-LOAN_AMOUNT'><input id='KJE-LOAN_AMOUNT' /></div> <div id='KJE-C-MONTHLY_PAYMENT'><input id='KJE-MONTHLY_PAYMENT' /></div> <div id='KJE-C-INTEREST_RATE'><input id='KJE-INTEREST_RATE' /></div> <div id='KJE-C-TERM'><input id='KJE-TERM' /></div> <div id='KJE-C-FEDERAL_TAX_RATE'><input id='KJE-FEDERAL_TAX_RATE' /></div> <div id='KJE-C-STATE_TAX_RATE'><input id='KJE-STATE_TAX_RATE' /></div> <div class=KJEDropperSpacer></div> </div> <div id=KJE-D-INPUTS2><div id=KJE-P-INPUTS2>Input information:</div></div> <div id=KJE-E-INPUTS2 > <div id='KJE-C-INTEREST_PAID'><div id='KJE-INTEREST_PAID'></div></div> <div id='KJE-C-TOTAL_OF_PAYMENTS'><div id='KJE-TOTAL_OF_PAYMENTS'></div></div> <div id='KJE-C-ENDING_BALANCE'><div id='KJE-ENDING_BALANCE'></div></div> <div id='KJE-C-TAX_REDUCTION_FIRST_YEAR'><div id='KJE-TAX_REDUCTION_FIRST_YEAR'></div></div> <div id='KJE-C-TAX_REDUCTION_TOTAL'><div id='KJE-TAX_REDUCTION_TOTAL'></div></div> <div class=KJEDropperSpacer></div> </div> **GRAPH1** ";KJE.DefinitionText=" <div id='KJE-D-LOAN_AMOUNT' ><dt>Loan amount</dt><dd>Total dollar amount of your loan or line of credit.</dd></div> <div id='KJE-D-INTEREST_RATE' ><dt>Interest rate (APR)</dt><dd>The annual percentage rate for this loan or line of credit.</dd></div> <div id='KJE-D-MONTHLY_PAYMENT' ><dt>Monthly payment</dt><dd>This is the monthly payment for this loan or line of credit. For lines of credit the payment can change month to month based on the current outstanding balance. This is the case with a line payment calculated on the amount of interest owed or as a percentage of the principal balance. </dd></div> <div id='KJE-D-TERM' ><dt>Term in months</dt><dd>Number of months for this loan or line of credit.</dd></div> <div id='KJE-D-FEDERAL_TAX_RATE' ><dt>Federal tax rate</dt><dd>The marginal federal tax rate you expect to pay.</dd></div> <div id='KJE-D-STATE_TAX_RATE' ><dt>State tax rate</dt><dd>The marginal state tax rate you expect to pay.</dd></div> <div id='KJE-D-PAYMENT_OPTION' ><dt>Payment options</dt><dd>Payment options for your loan or line of credit. Each option uses a different method to calculate your monthly payment. Please note that only the Fixed rate term will pay off your balance by the end of the payment term.<ul> <li><strong>Fixed rate term</strong>:&nbsp; Traditional amortization produces a fixed monthly payment. The monthly payment calculated will leave a zero balance at the end of the loan's term.<p> <li><strong>2%, 1.5% or 1% of balance</strong>:&nbsp; Your minimum payment is calculated as a percentage of the outstanding principal balance. Your minimum payment will change each month, and if you only make the minimum payment your balance will not be zero at the end of your loan's term.<p> <li><strong>100% of interest owed</strong>:&nbsp; For lines paying interest owed, your payment is 100% of the interest accrued during the month but no principal. Your payment may not be fixed if your interest rate or principal balance changes. </ul> </dd></div> <div id='KJE-D-TAX_SAVINGS' ><dt>Tax savings</dt><dd>Tax savings assumes that you qualify for a home interest deduction and that you itemize your taxes on schedule A of your Federal tax return. Total tax savings may be less for higher incomes which have their allowable itemized deductions phased out. Your total tax savings may also be reduced if you prepay your loan.</dd></div> ";KJE.ReportText=" <!--HEADING \"Loan & Credit Line Tax Savings\" HEADING--> <h2 class='KJEReportHeader KJEFontHeading'>Your first year tax savings is TAX_REDUCTION_FIRST_YEAR.</h2> This tax savings is based on a home equity loan or line that qualifies for a tax deduction on the interest paid. At a combined marginal tax rate of TAX_RATE, this tax deduction may be worth TAX_REDUCTION_FIRST_YEAR the first year of the loan or line. You could save a total of TAX_REDUCTION_TOTAL in taxes over the life of your loan or line. **GRAPH** Your first monthly payment based on PAYMENT_OPTION is MONTHLY_PAYMENT for a LOAN_AMOUNT LOAN_TYPE_LABEL. LOAN_TYPE_MSG <div class=KJECenter> <div class=KJEReportTableDiv><table class=KJEReportTable><caption class='KJEHeaderRow KJEHeading'>Loan summary</caption> <tbody class='KJEReportTBody'> <tr class=KJEOddRow><th class=\"KJELabel KJECellBorder KJECell60\" scope='row'>Payment option</th><td class=\"KJECell KJECell40\">PAYMENT_OPTION</td></tr> <tr class=KJEEvenRow><th class=\"KJELabel KJECellBorder\" scope='row'>Loan amount</th><td class=KJECell>LOAN_AMOUNT</td></tr> <tr class=KJEOddRow><th class=\"KJELabel KJECellBorder\" scope='row'>1st monthly payment</th><td class=KJECell>MONTHLY_PAYMENT</td></tr> <tr class=KJEEvenRow><th class=\"KJELabel KJECellBorder\" scope='row'>Interest rate</th><td class=KJECell>INTEREST_RATE</td></tr> <tr class=KJEOddRow><th class=\"KJELabel KJECellBorder\" scope='row'>Effective rate after taxes</th><td class=KJECell>TAX_ADJ_RATE</td></tr> <tr class=KJEEvenRow><th class=\"KJELabel KJECellBorder\" scope='row'>Term</th><td class=KJECell>TERM months</td></tr> <tr class=KJEOddRow><th class=\"KJELabel KJECellBorder\" scope='row'>Total payments</th><td class=KJECell>TOTAL_OF_PAYMENTS</td></tr> <tr class=KJEEvenRow><th class=\"KJELabel KJECellBorder\" scope='row'>Total interest paid</th><td class=KJECell>INTEREST_PAID</td></tr> </tbody> <tfoot class='KJEReportTFooter'> <tr class=KJEFooterRow><th class=\"KJELabel KJECellBorder\" scope='row'>First year tax savings*</th><td class=KJECellStrong>TAX_REDUCTION_FIRST_YEAR</td></tr> <tr class=KJEFooterRow><th class=\"KJELabel KJECellBorder\" scope='row'>Tax savings over term of loan or line*</th><td class=KJECellStrong>TAX_REDUCTION_TOTAL</td></tr> </tfoot> </table></div> <div class=KJEInset> <P class=KJEFooter>*Tax savings assumes that you qualify for a home interest deduction and that you itemize your taxes on schedule A of your Federal tax return. Total tax savings may be less for higher incomes which have their allowable itemized deductions phased out. Your total tax savings may also be reduced if you prepay your loan.</P> </div> </div> <h2 class='KJEScheduleHeader KJEFontHeading'>Payment Schedule</h2> **REPEATING GROUP** ";
// 06/30/2024 Copyright 2024 KJE Computer Solutions, Inc.  Licensed for use on https://www.coastalstatesbank.com

